(this["webpackJsonpcord-19-ui"]=this["webpackJsonpcord-19-ui"]||[]).push([[0],{186:function(e,n,t){e.exports=t.p+"static/media/VespaIcon.aefa1e1f.png"},187:function(e,n,t){e.exports=t.p+"static/media/VespaLogoWhite.2fad86a7.png"},207:function(e,n,t){e.exports=t(352)},212:function(e,n,t){},352:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(47),c=t.n(l),o=(t(212),t(213),t(35)),i=t(26),u=t(16),s=t(17),m=t(192),d=t(362),h=t(60);var g=function(e){let n=e.to,t=Object(h.a)(e,["to"]);return"download"in t?r.a.createElement("a",Object.assign({},t,{href:n}),t.children):!n||n.startsWith("http")||n.startsWith("/api/")?r.a.createElement("a",Object.assign({target:"_blank",rel:"noopener noreferrer"},t,{href:n}),t.children):r.a.createElement(o.a,Object.assign({to:n},t))};function f(){const e=Object(u.a)(["\n  &&& {\n    height: 64px;\n    margin: 0;\n\n    border-bottom: 1px solid rgba(63, 157, 216, 0.25);\n\n    .item.header {\n      font-weight: bold;\n      font-size: 1.4em;\n    }\n\n    .item,\n    .item > a,\n    .item > a:not(.ui) {\n      color: white;\n      font-weight: bold;\n    }\n\n    .item > a:hover {\n      color: #ffc43c;\n    }\n\n    .ui.image {\n      width: 100px;\n    }\n\n    span {\n      color: #ffc43c;\n    }\n  }\n"]);return f=function(){return e},e}function p(){const e=Object(u.a)(["\n  background-color: #005a8e;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.2);\n  a {\n    cursor: pointer;\n    font-weight: 600;\n  }\n"]);return p=function(){return e},e}const E=Object(s.a)(i.a)(p()),b=Object(s.a)(m.a)(f());var v=function(){return r.a.createElement(E,{sx:{paddingLeft:"0px",paddingRight:"0px"},width:1},r.a.createElement(d.a,null,r.a.createElement(b,{secondary:!0,inverted:!0,fluid:!0},r.a.createElement(m.a.Item,{header:!0,fitted:!0},r.a.createElement(g,{to:"/"},r.a.createElement("span",null,"CORD-19")," Search and Navigate")),r.a.createElement(m.a.Menu,{position:"right"},r.a.createElement(m.a.Item,null,r.a.createElement(g,{to:"https://github.com/vespa-engine/cord-19/blob/master/cord-19-queries.md"},"API")),r.a.createElement(m.a.Item,null,r.a.createElement(g,{to:"https://github.com/vespa-engine/cord-19/blob/master/README.md"},"Open source")),r.a.createElement(m.a.Item,null,r.a.createElement(g,{to:"https://github.com/vespa-engine/cord-19/blob/master/README.md#Contact"},"Contact us"))))))},j=t(195),O=t(366),w=t(191),x=t(30),y=t(364);function k(){const e=Object(u.a)(["\n  &&& {\n    font-size: 1.1rem;\n    margin: 0 auto;\n\n    input[type='text'] {\n      border-radius: 1.3rem;\n    }\n  }\n"]);return k=function(){return e},e}const S=Object(s.a)(y.a)(k());var C=function({onSearch:e,query:n=""}){const t=Object(a.useState)(n),l=Object(x.a)(t,2),c=l[0],o=l[1];return Object(a.useEffect)(()=>{n!==c&&o(n)},[n]),r.a.createElement(S,{onSubmit:()=>e({query:c})},r.a.createElement(y.a.Input,{fluid:!0,icon:"search",placeholder:"Search...",className:"input",onChange:(e,{value:n})=>o(n),value:c}))};const _="all(\n     all(group(source) order(-count()) each(output(count())))\n     all(group(journal) max(10) order(-count()) each(output(count())))\n     all(group(authors.name) max(10) order(-count()) each(output(count())) as(author))\n     all(group(time.year(timestamp)) max(10) order(-count()) each(output(count())) as(year))\n     all(group(has_full_text) each(output(count())))\n   )".split("\n").map(e=>e.trim()).join(""),I=(e,n,t=!1)=>n.length?"+("+n.map(n=>t?"".concat(e,":[").concat(n,"]"):"".concat(e,':"').concat(n,'"')).join(" ")+")":null,A=e=>Date.UTC(e,0,1)/1e3,D=e=>{const n=new URLSearchParams(window.location.search);for(var t=0,a=Object.entries(e);t<a.length;t++){let e=Object(x.a)(a[t],2),r=e[0],l=e[1];n.delete(r),Array.isArray(l)?l.forEach(e=>n.append(r,e)):l&&n.set(r,l)}n.entries().next().done||Object(o.c)("/search?"+n)},P=()=>{const e=new URLSearchParams(window.location.search);return{query:e.get("query")||"",journal:e.getAll("journal"),source:e.getAll("source"),year:e.getAll("year"),author:e.getAll("author"),has_full_text:e.getAll("has_full_text"),ranking:e.get("ranking")}};var R=t(186),F=t.n(R),M=t(131),z=t(187),L=t.n(z);function Y(){const e=Object(u.a)(["\n  &&& {\n    width: 100%;\n    margin: auto 0 0;\n    background-color: ",";\n\n    .ui {\n      margin: 0;\n      border: 0;\n      color: white;\n      box-shadow: none;\n    }\n\n    .ui.segment {\n      padding: 1em 0em;\n    }\n\n    .ui.segment.sides {\n      width: 200px;\n      padding: 0;\n    }\n\n    a {\n      font-weight: bold;\n      color: white;\n    }\n\n    a:hover {\n      color: #ffc43c;\n    }\n\n    .ui.image {\n      width: 100px;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      right: 0px;\n      margin: auto;\n    }\n  }\n"]);return Y=function(){return e},e}const q=Object(s.a)(i.a)(Y(),({page:e})=>"main"===e?"transparent":"#005a8e");var N=function({page:e=null}){return r.a.createElement(q,{page:e},r.a.createElement(d.a,null,r.a.createElement(M.a.Group,{horizontal:!0,size:"small"},r.a.createElement(M.a,{basic:!0,textAlign:"main"===e?"center":"left"},r.a.createElement(g,{to:"https://pages.semanticscholar.org/coronavirus-research"},"COVID-19 Open Research Dataset (CORD-19)"),". 2020. Version 2020-03-27. Accessed 2020-03-28."," ",r.a.createElement(g,{to:"https://doi.org/10.5281/zenodo.3727291"},"doi:10.5281/zenodo.3727291"),r.a.createElement("br",null),"Copyright Verizon Media 2020 Licensed under"," ",r.a.createElement(g,{to:"https://github.com/vespa-engine/cord-19/blob/master/LICENSE"},"Apache License 2.0")),"main"!==e&&r.a.createElement(M.a,{className:"sides",basic:!0},r.a.createElement(g,{to:"https://vespa.ai"},r.a.createElement(w.a,{src:L.a}))))))};function T(){const e=Object(u.a)(["\n  &&& {\n    min-height: calc(100vh - 130px);\n    color: white;\n    font-size: 1.1rem;\n    margin-top: 0;\n\n    .column {\n      padding: 0;\n    }\n\n    h1 {\n      font-size: 3.5rem;\n      font-weight: 300;\n    }\n\n    h4 {\n      font-size: 1.1rem;\n      margin: 3rem 0 0;\n    }\n\n    & .ui.list {\n      margin: 0.5rem 0;\n    }\n\n    .ui.form {\n      max-width: 800px;\n    }\n\n    a {\n      color: #b3e5fc !important;\n      font-weight: 600;\n      font-weight: normal;\n    }\n\n    a:hover {\n      color: #ffc43c !important;\n    }\n  }\n"]);return T=function(){return e},e}function V(){const e=Object(u.a)(["\n  background-image: linear-gradient(0deg, #98c1db 7%, #005a8e 100%);\n  min-height: calc(100vh - 66px);\n"]);return V=function(){return e},e}const U=Object(s.a)(i.a)(V()),B=Object(s.a)(j.a)(T());function H(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Try searching for..."),r.a.createElement(O.a,null,r.a.createElement(O.a.Item,null,r.a.createElement(g,{to:"/search?query=%2Bcovid-19+%2Btemperature+impact+on+viral+transmission"},"+covid-19 +temperature impact on viral transmission")),r.a.createElement(O.a.Item,null,r.a.createElement(g,{to:"/search?query=basic+reproduction+numbers+for+covid-19+in+%2B%22south+korea%22"},'basic reproduction numbers for covid-19 in +"south korea"')),r.a.createElement(O.a.Item,null,r.a.createElement(g,{to:"/search?query=Impact+of+school+closure+to+handle+COVID-19+pandemic"},"Impact of school closure to handle COVID-19 pandemic"))))}function W(){return r.a.createElement(i.a,{my:4},r.a.createElement(w.a,{src:F.a,size:"tiny",centered:!0}),r.a.createElement(i.c,{mt:3},"This is an"," ",r.a.createElement(g,{to:"https://github.com/vespa-engine/cord-19/blob/master/README.md"},"open source application"," "),"on ",r.a.createElement(g,{to:"https://vespa.ai"},"Vespa.ai")),r.a.createElement(i.c,{mt:1},"The big data serving engine."))}var J=function(){return r.a.createElement(U,{width:1},r.a.createElement(B,{verticalAlign:"middle",textAlign:"center"},r.a.createElement(j.a.Column,null,r.a.createElement("h1",{size:"huge"},"CORD-19 Search"),r.a.createElement(C,{onSearch:D}),r.a.createElement(H,null),r.a.createElement(W,null))),r.a.createElement(N,{page:"main"}))},K=t(193),$=t(368);function G(){const e=Object(u.a)(["\n  &&& {\n    width: 100%;\n    margin: 0;\n    .ui.message {\n      background: transparent;\n      box-shadow: none;\n    }\n    .ui.warning.message {\n      background: #fffaf3;\n    }\n    .ui.error.message {\n      background: #fff6f6;\n    }\n  }\n"]);return G=function(){return e},e}const Z=Object(s.a)(M.a)(G()),Q=({header:e,message:n})=>r.a.createElement(Z,{basic:!0,textAlign:"center"},r.a.createElement($.a,null,e&&r.a.createElement($.a.Header,null,e),r.a.createElement($.a.Content,null,n))),X=({header:e,message:n})=>r.a.createElement(Z,{basic:!0,textAlign:"center"},r.a.createElement($.a,{error:!0},e&&r.a.createElement($.a.Header,null,e),r.a.createElement($.a.Content,null,n)));var ee=t(41);const ne=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_URL||"https://api.cord19.vespa.ai";function te(e,n){return ae("GET",e,n)}function ae(e,n,t){function r(e,n){return Object(ee.a)({},e,{},n)}n.startsWith("http")||(n=ne+n),(t=t||{}).method=e,t.credentials="same-origin";const l=()=>fetch(n,t).then(e=>e.ok?e:e.text().then(n=>{let t=n;try{const e=JSON.parse(n);"message"in e&&(t=e.message)}catch(a){}return Promise.reject({message:t,code:e.status})})).then(e=>{const n=e.headers.get("content-type");return!n||t.returnRaw?e:n.includes("application/json")?e.json():n.includes("text/plain")?e.text():e});let c=!1;return{promise:l,state:e=>{const t=e||0,o={url:n,loading:null,cancel:()=>{c=!0},response:null,error:null,version:t},i=Object(a.useReducer)(r,o),u=Object(x.a)(i,2),s=u[0],m=u[1];return n===s.url&&t===s.version||m(o),null===s.loading&&(m({loading:!0}),l().then(e=>{c||m({loading:!1,response:e,version:t})}).catch(e=>{c||m({loading:!1,error:e,version:t})})),Object(ee.a)({},s,{loading:null===s.loading||s.loading})}}}var re=t(367),le=t(96),ce=t.n(le);function oe({first:e,middle:n,last:t}){if(!t)return e||n;const a=[e,n].filter(e=>e).join(" ").match(/(?:(?=^|\s)(\w)|([A-Z]))/g);return(a?a.join("")+" ":"")+t}function ie(){const e=Object(u.a)(["\n  && {\n    box-shadow: none;\n    margin-bottom: 2em;\n  }\n\n  &.card {\n    width: 100%;\n  }\n\n  .header {\n    font-weight: bold;\n    padding: 5px;\n  }\n\n  &.card .meta {\n    font-size: 0.9em;\n    padding: 0 0.5em;\n    color: rgba(0, 0, 0, 0.5);\n\n    a.doi {\n      float: right;\n    }\n  }\n\n  .meta:after {\n    content: '';\n    display: table;\n    clear: both;\n  }\n\n  && .content {\n    padding: 0.3em 0.5em;\n    border: 0;\n  }\n"]);return ie=function(){return e},e}const ue=Object(s.a)(re.a)(ie()),se=/<hi>(.*?)<\/hi>/g,me=e=>{let n=e.onClick,t=Object(h.a)(e,["onClick"]);return r.a.createElement("a",{href:"#root",onClick:e=>{e.preventDefault(),n()}},t.children)};function de({journal:e,timestamp:n}){const t=e?" (YYYY-MM-DD)":"YYYY-MM-DD";return r.a.createElement(r.a.Fragment,null,e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"Journal:")," ",e),n>0?r.a.createElement(ce.a,{format:t,unix:!0,utc:!0},1e3*n):null)}function he({doi:e}){return e?r.a.createElement(g,{className:"ui doi",to:e},e.replace("https://doi.org/","doi:")):null}function ge({source:e,citations_count_total:n}){const t=n>0;return e||t?r.a.createElement("div",null,e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"Source: "),e),e&&t&&r.a.createElement(r.a.Fragment,null,", "),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"Citations: "),n)):null}function fe({authors:e}){const n=Object(a.useState)(!1),t=Object(x.a)(n,2),l=t[0],c=t[1];if(!e)return null;const o=l||e.length<12?e.length:10;return r.a.createElement("div",null,r.a.createElement("b",null,"Authors: "),e.map(oe).slice(0,o).join(", "),o<e.length?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(me,{onClick:()=>c(!0)},"and ",e.length-o," more")):null)}var pe=function({fields:{id:e,title:n,timestamp:t,journal:a,doi:l,abstract:c,authors:o,source:i,citations_count_total:u},onSearchSimilar:s}){const m=(d=c)?d.replace(/<sep \/>/g,"\u2026").split(se).map((e,n)=>n%2===0?e:r.a.createElement("b",{key:n},e)):null;var d;const h=n.replace(se,"$1");return r.a.createElement(ue,null,r.a.createElement(re.a.Header,null,r.a.createElement(g,{to:"/article/".concat(e)},h)),r.a.createElement(re.a.Meta,null,r.a.createElement(de,{journal:a,timestamp:t}),r.a.createElement(he,{doi:l}),r.a.createElement(ge,{source:i,citations_count_total:u}),r.a.createElement(fe,{authors:o})),(m||s)&&r.a.createElement(re.a.Content,null,m&&r.a.createElement("p",null,m),s&&r.a.createElement(me,{onClick:s},"Search for similar articles")))},Ee=t(363),be=t(370);function ve(){const e=Object(u.a)(["\n  && {\n    display: block;\n    padding: 2px;\n    font-size: 0.9em;\n  }\n"]);return ve=function(){return e},e}const je=[{name:"Source",field:"source"},{name:"Journal",field:"journal"},{name:"Published",field:"year"},{name:"Author",field:"author"},{name:"Full text",field:"has_full_text"}],Oe=Object(s.a)(Ee.a)(ve());function we({name:e,field:n,values:t,onSearch:a}){if(!t||0===t.length)return null;const l=(e,{value:r,checked:l})=>{const c=t.filter(({value:e,checked:n})=>e===r?l:n).map(({value:e})=>e);a({[n]:c})};return r.a.createElement(y.a.Field,null,r.a.createElement("label",null,e),t.filter(({value:e})=>e.length>0&&!("year"===n&&"1970"===e)).map(({value:n,count:t,checked:a},c)=>r.a.createElement(Oe,{key:c,name:e,value:n,onChange:l,label:"".concat(n," (").concat(t,")"),checked:a})))}var xe=function(e){let n=e.onSearch,t=Object(h.a)(e,["onSearch"]);return r.a.createElement("div",{id:"sidebar",className:"ui form",style:{backgroundColor:"#f2f8ff"}},r.a.createElement(be.a,{fluid:!0,style:{marginBottom:"0.5em",background:"rgba(63,157,216,0.1) none",color:"#3f9dd8"},onClick:()=>n(je.reduce((e,{field:n})=>Object(ee.a)({},e,{[n]:[]}),{}))},"Clear all"),je.map(({name:e,field:a})=>r.a.createElement(we,{key:a,name:e,field:a,values:t[a],onSearch:n})))},ye=t(365);function ke(){const e=Object(u.a)(["\n  &&& {\n    margin-top: 2px;\n    > span {\n      float: right;\n    }\n  }\n"]);return ke=function(){return e},e}const Se=s.a.div(ke()),Ce=[{text:"title and abstract",value:"default"},{text:"all fields",value:"all"}],_e=[{text:"Vespa BM25",value:"bm25"},{text:"Vespa nativeRank",value:"default"},{text:"date",value:"freshness"}];var Ie=function({totalCount:e,fieldset:n,ranking:t,onSearch:a}){return r.a.createElement(Se,null,null!=e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,e)," matches"),r.a.createElement("span",null,"Searching in"," ",r.a.createElement(ye.a,{inline:!0,defaultValue:Ce.find(({value:e},t)=>n===e||!n&&0===t).value,options:Ce.map((e,n)=>Object(ee.a)({id:n},e)),onChange:(e,{value:n})=>a({fieldset:n})})," and sorting by ",r.a.createElement(ye.a,{inline:!0,defaultValue:_e.find(({value:e},n)=>t===e||!t&&0===n).value,options:_e.map((e,n)=>Object(ee.a)({id:n},e)),onChange:(e,{value:n})=>a({ranking:n})})))};function Ae(){const e=Object(u.a)(["\n  &&& {\n    font-size: 1rem;\n    width: 100%;\n    margin: 0.5em auto 0;\n    padding: 2rem 0;\n    display: flex;\n\n    #sidebar {\n      width: 30%;\n      max-width: 250px;\n      height: fit-content;\n      margin-right: 1em;\n      padding: 0.5em;\n      border-radius: 0.28571429rem;\n\n      .ui.button {\n        padding: 0.78125rem 0.4rem;\n        line-height: 1.4285em;\n      }\n    }\n\n    #search_results {\n      flex: 1;\n      margin-top: 0.5em; // Must match #sidebar top padding\n    }\n\n    #no_matches {\n      text-align: center;\n      margin: 2rem;\n    }\n  }\n"]);return Ae=function(){return e},e}const De=Object(s.a)(d.a)(Ae()),Pe=(e,n)=>e.replace(/(?:^|\s)(related_to:[0-9]+)(?:$|\s)/," ").trim()+" related_to:"+n;function Re({query:e}){return r.a.createElement("div",{id:"no_matches"},r.a.createElement("h1",null,"\xaf\\_(\u30c4)_/\xaf"),r.a.createElement("br",null),"No matches for ",r.a.createElement("b",null,e))}function Fe({articles:e,query:n,loading:t,error:a}){return t?r.a.createElement(Q,{message:"Searching..."}):a?r.a.createElement(X,{message:a.message||"Unknown search error..."}):0===e.length?r.a.createElement(Re,{query:n}):r.a.createElement(r.a.Fragment,null,e.map((e,t)=>r.a.createElement(pe,Object.assign({key:t},e,{onSearchSimilar:()=>D({query:Pe(n,e.fields.id)})}))))}var Me=function(){var e,n,t;const l=P(),c=(()=>{const e=P(),n=e.journal,t=e.source,a=e.year,r=e.author,l=e.has_full_text,c=a.map(e=>parseInt(e)).map(e=>A(e)+";"+(A(e+1)-1)),o=[I("journal",n),I("source",t),I("timestamp",c,!0),I("authors.name",r),I("has_full_text",l)].filter(e=>e).join(" "),i=new URLSearchParams(window.location.search),u=i.get("ranking"),s=i.get("fieldset");return["journal","source","year","author","has_full_text","ranking","fieldset"].forEach(e=>i.delete(e)),o&&i.set("filter",o),u&&i.set("ranking.profile",u),s&&i.set("model.defaultIndex",s),i.set("select",_),i})();c.set("type","any"),c.set("summary","short"),c.set("restrict","doc"),c.set("hits","20");const o=te("/search/?"+c.toString()).state(),i=o.loading,u=o.response,s=o.error,m=Object(a.useState)(),d=Object(x.a)(m,2),h=d[0],g=d[1],f=((null===u||void 0===u||null===(e=u.root)||void 0===e?void 0:e.children)||[]).sort(({id:e,relevance:n},{id:t,relevance:a})=>"group:root:0"===e?-1:"group:root:0"===t?1:a-n),p=Object(K.a)(f),E=p[0],b=p.slice(1);Object(a.useEffect)(()=>{i||g(E)},[E,g,i]);const v=null===u||void 0===u||null===(n=u.root)||void 0===n||null===(t=n.fields)||void 0===t?void 0:t.totalCount,j=(null===h||void 0===h?void 0:h.children)?h.children.reduce((e,{label:n,children:t})=>(e[n]=t.map(({value:e,fields:t})=>({value:e,count:t["count()"],checked:l[n].includes(e)})),e),{}):{};return r.a.createElement(r.a.Fragment,null,r.a.createElement(De,null,r.a.createElement(xe,Object.assign({onSearch:D},j)),r.a.createElement("div",{id:"search_results"},r.a.createElement(C,Object.assign({onSearch:D},l)),r.a.createElement(Ie,Object.assign({totalCount:v,onSearch:D},l)),r.a.createElement(Fe,Object.assign({query:l.query},{articles:b,loading:i,error:s})))),r.a.createElement(N,null))},ze=t(371),Le=t(372),Ye=t(373),qe=t(188);function Ne(){const e=Object(u.a)(["\n  width: fit-content;\n  margin: 0 auto;\n"]);return Ne=function(){return e},e}function Te(){const e=Object(u.a)(["\n  &&& {\n    margin-top: 2rem;\n    margin-bottom: 2rem;\n  }\n"]);return Te=function(){return e},e}const Ve=Object(s.a)(d.a)(Te()),Ue=s.a.div(Ne());function Be({authors:e}){return e?r.a.createElement(ze.a.Subheader,null,e.map(oe).join(", ")):null}function He({journal:e,timestamp:n,source:t,license:a,doi:l}){const c=e?" (YYYY-MM-DD)":"YYYY-MM-DD",o=n?r.a.createElement(ce.a,{format:c,unix:!0,utc:!0},1e3*n):null;return r.a.createElement(O.a,null,l&&r.a.createElement(O.a.Item,null,r.a.createElement(O.a.Header,null,"Doi"),r.a.createElement(g,{to:l},l.replace("https://doi.org/",""))),e?r.a.createElement(O.a.Item,null,r.a.createElement(O.a.Header,null,"Journal"),e," ",o):r.a.createElement(O.a.Item,null,r.a.createElement(O.a.Header,null,"Date"),o),t&&r.a.createElement(O.a.Item,null,r.a.createElement(O.a.Header,null,"Source"),t),a&&r.a.createElement(O.a.Item,null,r.a.createElement(O.a.Header,null,"License"),a))}function We({title:e,abstract:n,authors:t,doi:a,journal:l,timestamp:c,source:o,license:i}){return r.a.createElement(Ve,null,r.a.createElement(ze.a,{as:"h1"},e),r.a.createElement(Be,{authors:t}),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ze.a,{as:"h3"},"Abstract"),r.a.createElement("p",null,n)),r.a.createElement(He,{journal:l,timestamp:c,source:o,license:i,doi:a}))}function Je({id:e}){const n=new URLSearchParams;n.set("id",e),n.set("searchChain","related-ann"),n.set("summary","short"),n.set("ranking.profile","related-ann"),n.set("use-abstract","true"),n.set("hits","5");const t=te("/search/?"+n.toString()).state(),a=t.loading,l=t.response,c=t.error;return a?r.a.createElement(Q,{message:"Searching..."}):c?r.a.createElement(X,{message:c.message||"Unknown search error..."}):(console.log(l),"children"in l.root?r.a.createElement(Le.a.Pane,null,r.a.createElement(r.a.Fragment,null,l.root.children.map((e,n)=>r.a.createElement(pe,Object.assign({key:n},e))))):null)}function Ke({citedBy:e,page:n,onPageChange:t}){const a=Math.floor((e.length+9)/10);return r.a.createElement(d.a,null,e.slice(10*(n-1),10*n).map(e=>r.a.createElement($e,{key:e,id:e})),a>1&&r.a.createElement(Ue,null,r.a.createElement(Ye.a,{firstItem:null,lastItem:null,prevItem:null,nextItem:null,totalPages:a,defaultActivePage:n,onPageChange:(e,{activePage:n})=>t(n)})))}function $e({id:e}){const n=te("/document/v1/covid-19/doc/docid/".concat(e)).state(),t=n.loading,a=n.response,l=n.error;return t?r.a.createElement(Q,{message:"Loading..."}):l?r.a.createElement(X,{message:l.message||"Failed to load article #".concat(e)}):(console.log(a),r.a.createElement(pe,a))}var Ge=function({id:e}){const n=new URL(window.location),t=te("/document/v1/covid-19/doc/docid/".concat(e)).state(),a=t.loading,l=t.response,c=t.error;if(a)return r.a.createElement(Q,{message:"Loading..."});if(c)return r.a.createElement(X,{message:c.message||"Failed to load article #".concat(e)});console.log(l);const i=Object(qe.uniq)([...l.fields.cited_by||[],...(l.fields.citations_inbound||[]).map(e=>e.source_id).filter(e=>!isNaN(e))]),u=[{menuItem:"Similar articles",render:()=>r.a.createElement(Je,{id:l.fields.id})},{menuItem:{key:"citations",content:"".concat(i.length," citing articles"),disabled:0===i.length},render:()=>r.a.createElement(Ke,{citedBy:i,page:parseInt(n.searchParams.get("page"))||1,onPageChange:e=>{e>=1&&e-1<=i.length/10&&(n.searchParams.set("page",e),Object(o.c)(n))}})}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,null,r.a.createElement(We,l.fields),r.a.createElement(Le.a,{panes:u,defaultActiveIndex:n.searchParams.get("tab")||0,onTabChange:(e,t)=>{[...n.searchParams.keys()].forEach(e=>n.searchParams.delete(e)),n.searchParams.set("tab",t.activeIndex),Object(o.c)(n)}})),r.a.createElement(N,null))};function Ze(){const e=Object(u.a)(["\n  height: 80vh;\n"]);return Ze=function(){return e},e}function Qe(){const e=Object(u.a)(["\n  font-weight: 400;\n  color: #3f9dd8;\n"]);return Qe=function(){return e},e}const Xe=s.a.h2(Qe()),en=Object(s.a)(j.a)(Ze());var nn=function({code:e=404}){const n=(e=>{switch(e){case 403:return"Sorry, you are not authorized to view this page.";case 404:return"Sorry, the page you were looking for does not exist.";case 500:return"Oops... something went wrong.";default:return"Unknown error - really, I have no idea what is going on here."}})(e);return r.a.createElement(en,{textAlign:"center",verticalAlign:"middle"},r.a.createElement(j.a.Row,null,r.a.createElement(j.a.Column,{width:8},r.a.createElement(Xe,null,n))))};var tn=function(){return r.a.createElement(i.b,{flexDirection:"column",minHeight:"100vh"},r.a.createElement(i.a,{width:1},r.a.createElement(v,null)),r.a.createElement(o.b,{primary:!1,component:r.a.Fragment},r.a.createElement(J,{path:"/"}),r.a.createElement(Me,{path:"/search"}),r.a.createElement(Ge,{path:"/article/:id"}),r.a.createElement(nn,{default:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(tn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[207,1,2]]]);
//# sourceMappingURL=main.a1ac422e.chunk.js.map