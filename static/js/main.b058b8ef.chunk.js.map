{"version":3,"sources":["App/shared/img/VespaLogoWhite.png","App/shared/components/Link.js","App/shared/components/NavMenu.js","App/shared/components/Footer.js","App/shared/components/SearchForm.js","App/Search/Utils.js","App/Main.js","App/shared/components/Messages.js","App/shared/Fetcher.js","App/Search/ResultCard.js","App/Search/Sidebar.js","App/Search/index.js","App/Article/index.js","App/shared/components/Error.js","App/index.js","serviceWorker.js","index.js"],"names":["module","exports","Link","to","props","href","children","startsWith","target","rel","NavBar","styled","Menu","NavMenu","sx","paddingLeft","paddingRight","width","secondary","inverted","fluid","Item","header","position","FooterBox","Box","Footer","Segment","Group","horizontal","className","Image","src","logo","StyledSearchForm","Form","rankings","text","value","SearchForm","onSearch","ranking","showRanking","query","useState","currentQuery","setCurrentQuery","onSubmit","Input","icon","placeholder","onChange","e","Dropdown","defaultValue","find","i","options","map","rnk","id","event","select","split","s","trim","join","orCombiner","field","array","range","length","timestampStartOfYearUtc","year","Date","UTC","params","urlParams","URLSearchParams","window","location","search","get","keys","forEach","k","delete","Object","entries","key","Array","isArray","v","append","set","next","done","navigate","getSearchState","journal","getAll","source","author","has_full_text","ContentGrid","Grid","SearchSuggestions","List","VespaDescription","Main","verticalAlign","textAlign","Column","size","Container","Loading","message","basic","Message","Header","Content","Error","error","backend","process","REACT_APP_BACKEND_URL","Get","url","Fetch","method","reducer","state","action","credentials","fetcher","fetch","then","response","ok","json","JSON","parse","Promise","reject","code","status","contentType","headers","returnRaw","includes","isCanceled","promise","versionArg","version","initialState","loading","cancel","useReducer","dispatch","catch","StyledCard","Card","highlightReplacer","replace","nameFormatter","first","middle","last","matches","filter","match","JournalAndDate","timestamp","format","unix","utc","DoiLink","doi","SourceAndCitations","citations_count_total","showCitations","AuthorsList","authors","showAll","setShowAll","limit","slice","onClick","preventDefault","ResultCard","fields","title","abstract","content","fixedText","dangerouslySetInnerHTML","__html","formatText","plainTitle","Meta","PaddedCheckbox","Checkbox","Checkboxes","name","values","checked","selected","oValue","oChecked","Field","count","label","Sidebar","style","backgroundColor","boxShadow","div","NoMatches","SearchResults","searchState","timestampRanges","y","parseInt","q","generateApiQueryParams","toString","console","log","root","sort","id1","relevance","rev1","id2","rev2","grouping","articles","valuesState","reduce","obj","article","Search","ContainerContent","Authors","Subheader","license","date","as","Related","Tab","Pane","Fragment","CitedBy","citedBy","Article","citations","Set","cited_by","concat","citations_inbound","c","_","source_id","panes","menuItem","render","Title","h2","ErrorGrid","getMessage","Row","App","flexDirection","minHeight","bg","primary","component","React","path","default","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b058b8ef.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/VespaLogoWhite.2fad86a7.png\";","import React from 'react';\nimport { Link as InternalLink } from '@reach/router';\n\nfunction Link({ to, ...props }) {\n  if ('download' in props)\n    return (\n      <a {...props} href={to}>\n        {props.children}\n      </a>\n    );\n  if (to && !to.startsWith('http') && !to.startsWith('/api/'))\n    return <InternalLink to={to} {...props} />;\n  return (\n    <a target=\"_blank\" rel=\"noopener noreferrer\" {...props} href={to}>\n      {props.children}\n    </a>\n  );\n}\n\nexport default Link;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Box } from 'rebass';\nimport { Menu } from 'semantic-ui-react';\nimport Link from 'App/shared/components/Link';\n\nconst NavBar = styled(Menu)`\n  &&& {\n    height: 64px;\n    margin: 0;\n\n    border-bottom: 1px solid rgba(63, 157, 216, 0.25);\n\n    .item.header {\n      font-weight: bold;\n      font-size: 1.4em;\n    }\n\n    .item,\n    .item > a,\n    .item > a:not(.ui) {\n      color: white;\n      font-weight: bold;\n    }\n\n    .item > a:hover {\n      color: #ffc43c;\n    }\n\n    .ui.image {\n      width: 100px;\n    }\n  }\n`;\n\nfunction NavMenu() {\n  return (\n    <Box sx={{ paddingLeft: '16px', paddingRight: '16px' }} width={1}>\n      <NavBar secondary inverted fluid>\n        <Menu.Item header>\n          <Link to=\"/\">CORD-19 Search and Navigate</Link>\n        </Menu.Item>\n        <Menu.Menu position=\"right\">\n          <Menu.Item>\n            <Link to=\"https://twitter.com/vespaengine\">Twitter</Link>\n          </Menu.Item>\n          <Menu.Item>\n            <Link to=\"https://github.com/vespa-engine/cord-19/blob/master/README.md\">\n              Read more\n            </Link>\n          </Menu.Item>\n        </Menu.Menu>\n      </NavBar>\n    </Box>\n  );\n}\n\nexport default NavMenu;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Box } from 'rebass';\nimport Link from 'App/shared/components/Link';\nimport { Segment, Image } from 'semantic-ui-react';\nimport logo from 'App/shared/img/VespaLogoWhite.png';\n\nconst FooterBox = styled(Box)`\n  &&& {\n    width: 100%;\n    margin: auto 0 0;\n    border-top: 1px solid rgba(63, 157, 216, 0.25);\n\n    .ui {\n      background-color: #3f9cd8;\n      margin: 0;\n      border: 0;\n      color: white;\n      text-align: center;\n    }\n\n    .ui.segment.sides {\n      width: 200px;\n      padding: 0;\n    }\n\n    a {\n      font-weight: bold;\n      color: white;\n    }\n\n    a:hover {\n      color: #ffc43c;\n    }\n\n    .ui.image {\n      width: 100px;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      right: 15px;\n      margin: auto;\n    }\n  }\n`;\n\nfunction Footer() {\n  return (\n    <FooterBox>\n      <Segment.Group horizontal>\n        <Segment className=\"sides\" />\n        <Segment>\n          <Link to=\"https://pages.semanticscholar.org/coronavirus-research\">\n            COVID-19 Open Research Dataset (CORD-19)\n          </Link>\n          . 2020. Version 2020-03-27. Accessed 2020-03-28.{' '}\n          <Link to=\"https://doi.org/10.5281/zenodo.3727291\">\n            doi:10.5281/zenodo.3727291\n          </Link>\n          <br />\n          Copyright Verizon Media 2020 Licensed under{' '}\n          <Link to=\"https://github.com/vespa-engine/cord-19/blob/master/LICENSE\">\n            Apache License 2.0\n          </Link>\n        </Segment>\n        <Segment className=\"sides\">\n          <Link to=\"/\">\n            <Image src={logo} />\n          </Link>\n        </Segment>\n      </Segment.Group>\n    </FooterBox>\n  );\n}\n\nexport default Footer;\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { Form } from 'semantic-ui-react';\n\nconst StyledSearchForm = styled(Form)`\n  &&& {\n    font-size: 1.1rem;\n    display: flex;\n    width: 100%;\n    max-width: 800px;\n    margin: 0 auto;\n\n    .input {\n      margin: 0;\n      flex: 1;\n    }\n\n    & .dropdown {\n      margin-left: 1em;\n      width: fit-content;\n      border: 1px solid rgba(34, 36, 38, 0.15);\n      border-radius: 0.28571429rem\n      box-shadow: none;\n      background: white;\n      padding: 0.78125rem 0.4rem;\n    }\n  }\n`;\n\nconst rankings = [\n  {\n    text: 'Vespa BM25',\n    value: 'bm25',\n  },\n  {\n    text: 'Vespa nativeRank',\n    value: 'default',\n  },\n  {\n    text: 'Freshness',\n    value: 'freshness',\n  },\n];\n\nfunction SearchForm({ onSearch, ranking, showRanking, query = '' }) {\n  const [currentQuery, setCurrentQuery] = useState(query);\n\n  return (\n    <StyledSearchForm onSubmit={() => onSearch({ query: currentQuery })}>\n      <Form.Input\n        icon=\"search\"\n        placeholder=\"Search...\"\n        className=\"input\"\n        onChange={(e, { value }) => setCurrentQuery(value)}\n        value={currentQuery}\n      />\n      {showRanking && (\n        <Form.Dropdown\n          icon=\"sort amount down\"\n          defaultValue={\n            rankings.find(\n              ({ value }, i) => ranking === value || (!ranking && i === 0)\n            ).value\n          }\n          options={rankings.map((rnk, id) => ({ id, ...rnk }))}\n          onChange={(event, { value }) =>\n            onSearch({ query: currentQuery, ranking: value })\n          }\n        />\n      )}\n    </StyledSearchForm>\n  );\n}\n\nexport default SearchForm;\n","import { navigate } from '@reach/router';\n\nconst select = `all(\n     all(group(source) order(-count()) each(output(count())))\n     all(group(journal) max(10) order(-count()) each(output(count())))\n     all(group(authors.name) max(10) order(-count()) each(output(count())) as(author))\n     all(group(time.year(timestamp)) max(10) order(-count()) each(output(count())) as(year))\n     all(group(has_full_text) each(output(count())))\n   )`\n  .split('\\n')\n  .map(s => s.trim())\n  .join('');\n\nconst orCombiner = (field, array, range = false) =>\n  array.length\n    ? '+(' +\n      array\n        .map(s => (range ? `${field}:[${s}]` : `${field}:\"${s}\"`))\n        .join(' ') +\n      ')'\n    : null;\n\nconst timestampStartOfYearUtc = year => Date.UTC(year, 0, 1) / 1000;\n\nconst generateApiQueryParams = () => {\n  const { journal, source, year, author, has_full_text } = getSearchState();\n  const timestampRanges = year\n    .map(y => parseInt(y))\n    .map(\n      y =>\n        timestampStartOfYearUtc(y) + ';' + (timestampStartOfYearUtc(y + 1) - 1)\n    );\n  const filter = [\n    orCombiner('journal', journal),\n    orCombiner('source', source),\n    orCombiner('timestamp', timestampRanges, true),\n    orCombiner('authors.name', author),\n    orCombiner('has_full_text', has_full_text),\n  ]\n    .filter(s => s)\n    .join(' ');\n\n  const query = new URLSearchParams(window.location.search);\n  const ranking = query.get('ranking');\n  [\n    'journal',\n    'source',\n    'year',\n    'author',\n    'has_full_text',\n    'ranking',\n  ].forEach(q => query.delete(q));\n  if (filter) query.set('filter', filter);\n  if (ranking) query.set('ranking.profile', ranking);\n  query.set('select', select);\n\n  return query;\n};\n\nconst onSearch = params => {\n  const urlParams = new URLSearchParams(window.location.search);\n  // Reset all filters if searching new query\n  if ('query' in params && params.query !== urlParams.get('query'))\n    [...urlParams.keys()].forEach(k => urlParams.delete(k));\n\n  for (let [key, value] of Object.entries(params)) {\n    urlParams.delete(key);\n    if (Array.isArray(value)) value.forEach(v => urlParams.append(key, v));\n    else if (value) urlParams.set(key, value);\n  }\n\n  // No query or filters specified\n  if (urlParams.entries().next().done) return;\n  navigate('/search?' + urlParams);\n};\n\nconst getSearchState = () => {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  return {\n    query: urlParams.get('query') || '',\n    journal: urlParams.getAll('journal'),\n    source: urlParams.getAll('source'),\n    year: urlParams.getAll('year'),\n    author: urlParams.getAll('author'),\n    has_full_text: urlParams.getAll('has_full_text'),\n    ranking: urlParams.get('ranking'),\n  };\n};\n\nexport { generateApiQueryParams, getSearchState, onSearch };\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Grid, List } from 'semantic-ui-react';\nimport SearchForm from 'App/shared/components/SearchForm';\nimport Link from 'App/shared/components/Link';\nimport { onSearch } from './Search/Utils';\n\nconst ContentGrid = styled(Grid)`\n  &&& {\n    font-size: 1.1rem;\n\n    .column {\n      margin-top: 150px;\n      padding: 0;\n    }\n\n    h1 {\n      font-size: 3.5rem;\n      font-weight: 300;\n    }\n\n    h4 {\n      font-size: 1.1rem;\n      margin: 3rem 0 0;\n    }\n\n    & .ui.list {\n      margin: 0.5rem 0;\n    }\n  }\n`;\n\nfunction SearchSuggestions() {\n  return (\n    <>\n      <h4>Try searching for...</h4>\n      <List>\n        <List.Item>\n          <Link to=\"/search?query=%2Bcovid-19+%2Btemperature+impact+on+viral+transmission\">\n            +covid-19 +temperature impact on viral transmission\n          </Link>\n        </List.Item>\n        <List.Item>\n          <Link to=\"/search?query=basic+reproduction+numbers+for+covid-19+in+%2B%22south+korea%22\">\n            basic reproduction numbers for covid-19 in +\"south korea\"\n          </Link>\n        </List.Item>\n        <List.Item>\n          <Link to=\"/search?query=Impact+of+school+closure+to+handle+COVID-19+pandemic\">\n            Impact of school closure to handle COVID-19 pandemic\n          </Link>\n        </List.Item>\n      </List>\n    </>\n  );\n}\n\nfunction VespaDescription() {\n  return (\n    <>\n      <h4>\n        Powered by <Link to=\"https://vespa.ai\">Vespa.ai</Link>\n      </h4>\n      The open big data serving engine: Store, search, rank and organize big\n      data at user serving time.\n    </>\n  );\n}\n\nfunction Main() {\n  return (\n    <ContentGrid verticalAlign=\"middle\" textAlign=\"center\">\n      <Grid.Column>\n        <h1 size=\"huge\">CORD-19 Search</h1>\n        <SearchForm onSearch={onSearch} />\n        <SearchSuggestions />\n        <VespaDescription />\n      </Grid.Column>\n    </ContentGrid>\n  );\n}\n\nexport default Main;\n","/**\n * Component to encapsulate messages that should be displayed on page (typically in place of something\n * else if it failed to load)\n */\nimport React from 'react';\nimport { Message, Segment } from 'semantic-ui-react';\nimport styled from 'styled-components';\n\nconst Container = styled(Segment)`\n  &&& {\n    width: 100%;\n    margin: 0;\n    .ui.message {\n      background: transparent;\n      box-shadow: none;\n    }\n    .ui.warning.message {\n      background: #fffaf3;\n    }\n    .ui.error.message {\n      background: #fff6f6;\n    }\n  }\n`;\n\nconst Loading = ({ header, message }) => (\n  <Container basic textAlign={'center'}>\n    <Message>\n      {header && <Message.Header>{header}</Message.Header>}\n      <Message.Content>{message}</Message.Content>\n    </Message>\n  </Container>\n);\n\nconst Warning = ({ header, message }) => (\n  <Container basic textAlign={'center'}>\n    <Message warning>\n      {header && <Message.Header>{header}</Message.Header>}\n      <Message.Content>{message}</Message.Content>\n    </Message>\n  </Container>\n);\n\nconst Error = ({ header, message }) => (\n  <Container basic textAlign={'center'}>\n    <Message error>\n      {header && <Message.Header>{header}</Message.Header>}\n      <Message.Content>{message}</Message.Content>\n    </Message>\n  </Container>\n);\n\nexport { Loading, Warning, Error };\n","import { useReducer } from 'react';\n\nconst backend =\n  process.env.REACT_APP_BACKEND_URL || 'https://api.cord19.vespa.ai';\n\nfunction Get(url, params) {\n  return Fetch('GET', url, params);\n}\n\nfunction Post(url, params) {\n  return Fetch('POST', url, params);\n}\n\nfunction Put(url, params) {\n  return Fetch('PUT', url, params);\n}\n\nfunction Patch(url, params) {\n  return Fetch('PATCH', url, params);\n}\n\nfunction Delete(url, params) {\n  return Fetch('DELETE', url, params);\n}\n\nfunction Fetch(method, url, params) {\n  function reducer(state, action) {\n    return { ...state, ...action };\n  }\n\n  if (!url.startsWith('http')) url = backend + url;\n\n  params = params || {};\n  params.method = method;\n  params.credentials = 'same-origin'; //Not default for all browsers yet\n\n  const fetcher = () =>\n    fetch(url, params)\n      // Reject promise if response is not OK\n      .then(response => {\n        if (response.ok) return response;\n\n        return response.text().then(text => {\n          let message = text;\n          try {\n            const json = JSON.parse(text);\n            if ('message' in json) message = json.message;\n          } catch (e) {\n            // not JSON\n          }\n          return Promise.reject({ message, code: response.status });\n        });\n      })\n\n      // automatically return the data if it's a known content type\n      .then(response => {\n        const contentType = response.headers.get('content-type');\n        if (!contentType || params.returnRaw) return response;\n        if (contentType.includes('application/json')) {\n          return response.json();\n        } else if (contentType.includes('text/plain')) {\n          return response.text();\n        }\n        return response;\n      });\n\n  let isCanceled = false;\n  const useFetcher = versionArg => {\n    const version = versionArg || 0;\n    const initialState = {\n      url: url,\n      loading: null,\n      cancel: () => {\n        isCanceled = true;\n      },\n      response: null,\n      error: null,\n      version: version,\n    };\n\n    const [state, dispatch] = useReducer(reducer, initialState);\n\n    if (url !== state.url || version !== state.version) dispatch(initialState);\n\n    if (state.loading === null) {\n      dispatch({ loading: true });\n      fetcher()\n        .then(response => {\n          if (!isCanceled)\n            dispatch({\n              loading: false,\n              response: response,\n              version: version,\n            });\n        })\n        .catch(error => {\n          if (!isCanceled)\n            dispatch({ loading: false, error: error, version: version });\n        });\n    }\n    return { ...state, loading: state.loading === null || state.loading };\n  };\n\n  return { promise: fetcher, state: useFetcher };\n}\n\nexport { Get, Post, Put, Patch, Delete };\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { Card } from 'semantic-ui-react';\nimport Moment from 'react-moment';\nimport Link from 'App/shared/components/Link';\n\nconst StyledCard = styled(Card)`\n  && {\n    box-shadow: none;\n  }\n\n  &.card {\n    width: 100%;\n  }\n\n  .header {\n    font-weight: bold;\n    padding: 5px;\n  }\n\n  &.card .meta {\n    padding: 3px 5px;\n    color: rgba(0, 0, 0, 0.5);\n\n    a.doi {\n      float: right;\n    }\n  }\n\n  .meta:after {\n    content: '';\n    display: table;\n    clear: both;\n  }\n\n  && .content {\n    padding: 0.5em;\n    border: 0;\n  }\n`;\n\nconst highlightReplacer = (text, replace) =>\n  text.replace(/<(\\/?)hi>/g, replace);\nconst formatText = text => {\n  if (!text) return null;\n  const fixedText = highlightReplacer(text.replace(/<sep \\/>/g, '…'), '<$1b>');\n  return (\n    <p\n      dangerouslySetInnerHTML={{\n        __html: fixedText,\n      }}\n    />\n  );\n};\n\nconst nameFormatter = ({ first, middle, last }) => {\n  if (!last) return first || middle;\n  const matches = [first, middle]\n    .filter(s => s)\n    .join(' ')\n    .match(/(?:(?=^|\\s)(\\w)|([A-Z]))/g);\n\n  return (matches ? matches.join('') + ' ' : '') + last;\n};\n\nfunction JournalAndDate({ journal, timestamp }) {\n  const format = journal ? ' (YYYY-MM-DD)' : 'YYYY-MM-DD';\n  return (\n    <>\n      {journal && (\n        <>\n          <b>Journal:</b> {journal}\n        </>\n      )}\n      {timestamp > 0 ? (\n        <Moment format={format} unix utc>\n          {timestamp * 1000}\n        </Moment>\n      ) : null}\n    </>\n  );\n}\n\nfunction DoiLink({ doi }) {\n  if (!doi) return null;\n  return (\n    <Link className=\"ui doi\" to={doi}>\n      {doi.replace('https://doi.org/', 'doi:')}\n    </Link>\n  );\n}\n\nfunction SourceAndCitations({ source, citations_count_total }) {\n  const showCitations = citations_count_total > 0;\n  if (!source && !showCitations) return null;\n  return (\n    <div>\n      {source && (\n        <>\n          <b>Source: </b>\n          {source}\n        </>\n      )}\n      {source && showCitations && <>, </>}\n      {showCitations && (\n        <>\n          <b>Citations: </b>\n          {citations_count_total}\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction AuthorsList({ authors }) {\n  const [showAll, setShowAll] = useState(false);\n  const onShowAll = e => {\n    e.preventDefault();\n    setShowAll(true);\n  };\n\n  if (!authors) return null;\n  const limit = showAll || authors.length < 12 ? authors.length : 10;\n  return (\n    <div>\n      <b>Authors: </b>\n      {authors\n        .map(nameFormatter)\n        .slice(0, limit)\n        .join(', ')}\n      {limit < authors.length ? (\n        <>\n          {' '}\n          <a href=\"#root\" onClick={onShowAll}>\n            and {authors.length - limit} more\n          </a>\n        </>\n      ) : null}\n    </div>\n  );\n}\n\nfunction ResultCard({\n  fields: {\n    id,\n    title,\n    timestamp,\n    journal,\n    doi,\n    abstract,\n    authors,\n    source,\n    citations_count_total,\n  },\n}) {\n  const content = formatText(abstract);\n  const plainTitle = highlightReplacer(title, '');\n  return (\n    <StyledCard>\n      <Card.Header>\n        <Link to={`/article/${id}`}>{plainTitle}</Link>\n      </Card.Header>\n      <Card.Meta>\n        <JournalAndDate {...{ journal, timestamp }} />\n        <DoiLink doi={doi} />\n        <SourceAndCitations {...{ source, citations_count_total }} />\n        <AuthorsList authors={authors} />\n      </Card.Meta>\n      {content && <Card.Content>{content}</Card.Content>}\n    </StyledCard>\n  );\n}\n\nexport default ResultCard;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Checkbox, Form } from 'semantic-ui-react';\n\nconst PaddedCheckbox = styled(Checkbox)`\n  && {\n    display: block;\n    padding: 2px;\n  }\n`;\n\nfunction Checkboxes({ name, field, values, onSearch }) {\n  if (values.length === 0) return null;\n  const onChange = (event, { value, checked }) => {\n    const selected = values\n      .filter(({ value: oValue, checked: oChecked }) =>\n        oValue === value ? checked : oChecked\n      )\n      .map(({ value: oValue }) => oValue);\n    onSearch({ [field]: selected });\n  };\n\n  return (\n    <Form.Field>\n      <label>{name}</label>\n      {values\n        .filter(({ value }) => value.length > 0)\n        .map(({ value, count, checked }, i) => (\n          <PaddedCheckbox\n            key={i}\n            name={name}\n            value={value}\n            onChange={onChange}\n            label={`${value} (${count})`}\n            checked={checked}\n          />\n        ))}\n    </Form.Field>\n  );\n}\n\nfunction Sidebar({ journal, source, year, author, has_full_text, onSearch }) {\n  return (\n    <div\n      id=\"sidebar\"\n      className=\"ui form\"\n      style={{ backgroundColor: '#f2f8ff', boxShadow: '1px 1px #a0c0f0' }}\n    >\n      <Checkboxes\n        name=\"Source\"\n        field=\"source\"\n        values={source}\n        onSearch={onSearch}\n      />\n      <Checkboxes\n        name=\"Journal\"\n        field=\"journal\"\n        values={journal}\n        onSearch={onSearch}\n      />\n      <Checkboxes\n        name=\"Published\"\n        field=\"year\"\n        values={year}\n        onSearch={onSearch}\n      />\n      <Checkboxes\n        name=\"Author\"\n        field=\"author\"\n        values={author}\n        onSearch={onSearch}\n      />\n      <Checkboxes\n        name=\"Full text\"\n        field=\"has_full_text\"\n        values={has_full_text}\n        onSearch={onSearch}\n      />\n    </div>\n  );\n}\n\nexport default Sidebar;\n","import React from 'react';\nimport styled from 'styled-components';\nimport SearchForm from 'App/shared/components/SearchForm';\nimport { Loading, Error } from 'App/shared/components/Messages';\nimport { Get } from 'App/shared/Fetcher';\nimport ResultCard from './ResultCard';\nimport Sidebar from './Sidebar';\nimport { generateApiQueryParams, getSearchState, onSearch } from './Utils';\n\nconst Container = styled.div`\n  &&& {\n    font-size: 1.1rem;\n    width: 100%;\n    max-width: 1500px;\n    margin: 0 auto;\n    padding: 2rem 0.5rem;\n\n    #wrapper {\n      display: flex;\n      margin-top: 1em;\n    }\n\n    #sidebar {\n      width: 30%;\n      max-width: 300px;\n      height: fit-content;\n      margin-right: 1em;\n      padding: 0.5em;\n      border-radius: 0.28571429rem;\n    }\n\n    #search_results {\n      flex: 1;\n    }\n\n    #no_matches {\n      text-align: center;\n      margin: 2rem;\n    }\n  }\n`;\n\nfunction NoMatches({ query }) {\n  return (\n    <div id=\"no_matches\">\n      <h1>¯\\_(ツ)_/¯</h1>\n      <br />\n      No matches for <b>{query}</b>\n    </div>\n  );\n}\n\nfunction SearchResults(searchState) {\n  const groupingId = 'group:root:0';\n  const query = generateApiQueryParams();\n  query.set('type', 'any');\n  query.set('summary', 'short');\n  query.set('restrict', 'doc');\n  query.set('hits', '20');\n\n  const { loading, response, error } = Get(\n    '/search/?' + query.toString()\n  ).state();\n\n  if (loading) return <Loading message=\"Searching...\" />;\n  if (error)\n    return <Error message={error.message || 'Unknown search error...'} />;\n\n  console.log(response);\n  const [\n    grouping,\n    ...articles\n  ] = response.root.children.sort(\n    ({ id: id1, relevance: rev1 }, { id: id2, relevance: rev2 }) =>\n      id1 === groupingId ? -1 : id2 === groupingId ? 1 : rev2 - rev1\n  );\n  if (articles.length === 0) return <NoMatches {...searchState} />;\n\n  const valuesState = grouping.children.reduce((obj, { label, children }) => {\n    obj[label] = children.map(({ value, fields }) => ({\n      value,\n      count: fields['count()'],\n      checked: searchState[label].includes(value),\n    }));\n    return obj;\n  }, {});\n\n  return (\n    <div id=\"wrapper\">\n      <Sidebar onSearch={onSearch} {...searchState} {...valuesState} />\n      <div id=\"search_results\">\n        {articles.map((article, i) => (\n          <ResultCard key={i} {...article} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction Search() {\n  const searchState = getSearchState();\n\n  return (\n    <Container>\n      <SearchForm showRanking onSearch={onSearch} {...searchState} />\n      <SearchResults {...searchState} />\n    </Container>\n  );\n}\n\nexport default Search;\n","import React from 'react';\nimport styled from 'styled-components';\nimport Moment from 'react-moment';\nimport { Container, Header, Tab, List } from 'semantic-ui-react';\nimport { Error, Loading } from 'App/shared/components/Messages';\nimport { Get } from 'App/shared/Fetcher';\nimport ResultCard from 'App/Search/ResultCard';\nimport Link from 'App/shared/components/Link';\n\nconst ContainerContent = styled(Container)`\n  &&& {\n    margin-top: 2rem;\n    margin-bottom: 2rem;\n  }\n`;\n\nconst nameFormatter = ({ first, middle, last }) => {\n  if (!last) return first || middle;\n  const matches = [first, middle]\n    .filter(s => s)\n    .join(' ')\n    .match(/(?:(?=^|\\s)(\\w)|([A-Z]))/g);\n  return (matches ? matches.join('') + ' ' : '') + last;\n};\n\nfunction Authors({ authors }) {\n  const limit = authors.length;\n  return (\n    <Header.Subheader>\n      {authors\n        .map(nameFormatter)\n        .slice(0, limit)\n        .join(', ')}\n    </Header.Subheader>\n  );\n}\n\nfunction Meta({ journal, timestamp, source, license, doi }) {\n  const format = journal ? ' (YYYY-MM-DD)' : 'YYYY-MM-DD';\n  const date = timestamp ? (\n    <Moment format={format} unix utc>\n      {timestamp * 1000}\n    </Moment>\n  ) : null;\n\n  return (\n    <List>\n      <List.Item>\n        <List.Header>Doi</List.Header>\n        <Link to={doi}>{doi.replace('https://doi.org/', '')}</Link>\n      </List.Item>\n      {journal ? (\n        <List.Item>\n          <List.Header>Journal</List.Header>\n          {journal} {date}\n        </List.Item>\n      ) : (\n        <List.Item>\n          <List.Header>Date</List.Header>\n          {date}\n        </List.Item>\n      )}\n      <List.Item>\n        <List.Header>Source</List.Header>\n        {source}\n      </List.Item>\n      <List.Item>\n        <List.Header>License</List.Header>\n        {license}\n      </List.Item>\n    </List>\n  );\n}\n\nfunction Content({\n  title,\n  abstract,\n  authors,\n  doi,\n  journal,\n  timestamp,\n  source,\n  license,\n}) {\n  return (\n    <ContainerContent>\n      <Header as=\"h1\">{title}</Header>\n      <Authors authors={authors} />\n      <Header as=\"h3\">Abstract</Header>\n      <p>{abstract}</p>\n      <Meta {...{ journal, timestamp, source, license, doi }} />\n    </ContainerContent>\n  );\n}\n\nfunction Related({ id }) {\n  const query = new URLSearchParams();\n  query.set('id', id);\n  query.set('searchChain', 'related-ann');\n  query.set('summary', 'short');\n  query.set('hits', '3');\n\n  const { loading, response, error } = Get(\n    '/search/?' + query.toString()\n  ).state();\n\n  if (loading) return <Loading message=\"Searching...\" />;\n  if (error)\n    return <Error message={error.message || 'Unknown search error...'} />;\n\n  console.log(response);\n  if (!('children' in response.root)) return null;\n  return (\n    <Tab.Pane>\n      <React.Fragment>\n        {response.root.children.map((article, i) => (\n          <ResultCard key={i} {...article} />\n        ))}\n      </React.Fragment>\n    </Tab.Pane>\n  );\n}\n\nfunction CitedBy({ citedBy }) {\n  return citedBy.map(id => {\n    const { loading, response, error } = Get(\n      `/document/v1/covid-19/doc/docid/${id}`\n    ).state();\n\n    if (loading) return <Loading key={id} message=\"Loading...\" />;\n    if (error)\n      return (\n        <Error\n          key={id}\n          message={error.message || `Failed to load article #${id}`}\n        />\n      );\n\n    console.log(response);\n    return <ResultCard key={id} {...response} />;\n  });\n}\n\nfunction Article({ id }) {\n  const { loading, response, error } = Get(\n    `/document/v1/covid-19/doc/docid/${id}`\n  ).state();\n\n  if (loading) return <Loading message=\"Loading...\" />;\n  if (error)\n    return <Error message={error.message || `Failed to load article #${id}`} />;\n\n  console.log(response);\n\n  const citations = [\n    ...new Set(\n      (response.fields.cited_by || []).concat(\n        (response.fields.citations_inbound || []).map((c, _) => c.source_id)\n      )\n    ),\n  ];\n\n  const panes = [\n    {\n      menuItem: 'Related articles',\n      render: () => <Related id={response.fields.id} />,\n    },\n    {\n      menuItem: `${citations.length} citing articles`,\n      render: () => <CitedBy citedBy={citations} />,\n    },\n  ];\n\n  return (\n    <ContainerContent>\n      <Content {...response.fields} />\n      <Tab panes={panes} />\n    </ContainerContent>\n  );\n}\n\nexport default Article;\n","import React from 'react';\nimport { Grid } from 'semantic-ui-react';\nimport styled from 'styled-components';\n\nconst Title = styled.h2`\n  font-weight: 400;\n  color: #3f9dd8;\n`;\n\nconst ErrorGrid = styled(Grid)`\n  height: 80vh;\n`;\n\nconst getMessage = code => {\n  switch (code) {\n    case 403:\n      return 'Sorry, you are not authorized to view this page.';\n    case 404:\n      return 'Sorry, the page you were looking for does not exist.';\n    case 500:\n      return 'Oops... something went wrong.';\n    default:\n      return 'Unknown error - really, I have no idea what is going on here.';\n  }\n};\n\nfunction Error({ code = 404 }) {\n  const message = getMessage(code);\n\n  return (\n    <ErrorGrid textAlign=\"center\" verticalAlign=\"middle\">\n      <Grid.Row>\n        <Grid.Column width={8}>\n          <Title>{message}</Title>\n        </Grid.Column>\n      </Grid.Row>\n    </ErrorGrid>\n  );\n}\n\nexport default Error;\n","import React from 'react';\nimport { Router } from '@reach/router';\nimport { Flex, Box } from 'rebass';\nimport NavMenu from 'App/shared/components/NavMenu';\nimport Footer from 'App/shared/components/Footer';\nimport Main from './Main';\nimport Search from './Search';\nimport Article from './Article';\nimport Error from 'App/shared/components/Error';\n\nfunction App() {\n  return (\n    <Flex flexDirection=\"column\" minHeight=\"100vh\">\n      <Box width={1} bg=\"#3F9CD8\">\n        <NavMenu />\n      </Box>\n      <Box width={1}>\n        <Router primary={false} component={React.Fragment}>\n          <Main path=\"/\" />\n          <Search path=\"/search\" />\n          <Article path=\"/article/:id\" />\n          <Error default />\n        </Router>\n      </Box>\n      <Footer />\n    </Flex>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'fomantic-ui-css/semantic.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nif (process.env.NODE_ENV !== 'production') {\n  const whyDidYouRender = require('@welldone-software/why-did-you-render');\n  whyDidYouRender(React);\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}